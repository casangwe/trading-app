{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\casan\\\\trading-app\\\\trading-frontend\\\\src\\\\components\\\\AccountGraph.js\";\nimport React, { useEffect, useRef } from \"react\";\nimport \"./styles/accountGraph.css\";\nconst AccountGraph = ({\n  trades,\n  onTimePeriodChange\n}) => {\n  const chartRef = useRef(null);\n  useEffect(() => {\n    const calculateProfitsForAllTimePeriods = trades => {\n      const timePeriods = [\"1D\", \"1W\", \"1M\", \"3M\", \"YTD\", \"1Y\", \"Max\"];\n      const profitsData = [];\n      timePeriods.forEach(selectedTimePeriod => {\n        let startDate = new Date();\n        let totalProfit = 0;\n        switch (selectedTimePeriod) {\n          case \"1D\":\n            startDate.setDate(startDate.getDate() - 1);\n            break;\n          case \"1W\":\n            startDate.setDate(startDate.getDate() - 7);\n            break;\n          case \"1M\":\n            startDate.setMonth(startDate.getMonth() - 1);\n            break;\n          case \"3M\":\n            startDate.setMonth(startDate.getMonth() - 3);\n            break;\n          case \"YTD\":\n            startDate = new Date(startDate.getFullYear(), 0, 1); // Year to Date\n            break;\n          case \"1Y\":\n            startDate.setFullYear(startDate.getFullYear() - 1);\n            break;\n          case \"Max\":\n            return trades.reduce((total, trade) => {\n              const entryPrice = parseFloat(trade.entry_price);\n              const exitPrice = parseFloat(trade.exit_price);\n              const contracts = trade.contracts;\n              if (!isNaN(exitPrice)) {\n                return total + (exitPrice - entryPrice) * contracts * 100;\n              }\n              return total;\n            }, 0);\n            break;\n          default:\n            break;\n        }\n        if (selectedTimePeriod !== \"Max\") {\n          const filteredTrades = trades.filter(trade => new Date(trade.close_date) >= startDate);\n          totalProfit = filteredTrades.reduce((sum, trade) => {\n            const entryPrice = parseFloat(trade.entry_price);\n            const exitPrice = parseFloat(trade.exit_price);\n            const contracts = trade.contracts;\n            if (!isNaN(exitPrice)) {\n              return sum + (exitPrice - entryPrice) * contracts * 100;\n            }\n            return sum;\n          }, 0);\n        }\n        profitsData.push({\n          timePeriod: selectedTimePeriod,\n          profit: totalProfit,\n          backgroundColor: totalProfit >= 0 ? \"lightgreen\" : \"rgb(255, 204, 204)\"\n        });\n      });\n      return profitsData;\n    };\n    const ctx = chartRef.current.getContext(\"2d\");\n    const profitsData = calculateProfitsForAllTimePeriods(trades);\n    const myChart = new window.Chart(ctx, {\n      type: \"bar\",\n      data: {\n        labels: profitsData.map(data => data.timePeriod),\n        datasets: [{\n          label: \"Profit/Loss\",\n          data: profitsData.map(data => data.profit),\n          backgroundColor: profitsData.map(data => data.backgroundColor),\n          barThickness: 50 // Adjust thickness as needed\n        }]\n      },\n      options: {\n        plugins: {\n          legend: {\n            display: false\n          }\n        },\n        scales: {\n          x: {\n            grid: {\n              display: false\n            }\n          },\n          y: {\n            display: true,\n            title: {\n              display: true,\n              text: \"Profit/Loss\"\n            },\n            grid: {\n              color: context => context.tick.value === 0 ? \"rgba(0, 0, 0, 1)\" : \"rgba(0, 0, 0, 0)\",\n              // Only show line at 0\n              lineWidth: 0.5 // Adjust line width as needed\n            },\n            ticks: {\n              callback: function (value, index, values) {\n                return value === 0 ? value : \"\";\n              }\n            }\n          }\n        }\n      }\n    });\n    return () => {\n      myChart.destroy();\n    };\n  }, [trades]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"account-graph\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: chartRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }));\n};\nexport default AccountGraph;","map":{"version":3,"names":["React","useEffect","useRef","AccountGraph","trades","onTimePeriodChange","chartRef","calculateProfitsForAllTimePeriods","timePeriods","profitsData","forEach","selectedTimePeriod","startDate","Date","totalProfit","setDate","getDate","setMonth","getMonth","getFullYear","setFullYear","reduce","total","trade","entryPrice","parseFloat","entry_price","exitPrice","exit_price","contracts","isNaN","filteredTrades","filter","close_date","sum","push","timePeriod","profit","backgroundColor","ctx","current","getContext","myChart","window","Chart","type","data","labels","map","datasets","label","barThickness","options","plugins","legend","display","scales","x","grid","y","title","text","color","context","tick","value","lineWidth","ticks","callback","index","values","destroy","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref"],"sources":["C:/Users/casan/trading-app/trading-frontend/src/components/AccountGraph.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport \"./styles/accountGraph.css\";\r\n\r\nconst AccountGraph = ({ trades, onTimePeriodChange }) => {\r\n  const chartRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const calculateProfitsForAllTimePeriods = (trades) => {\r\n      const timePeriods = [\"1D\", \"1W\", \"1M\", \"3M\", \"YTD\", \"1Y\", \"Max\"];\r\n      const profitsData = [];\r\n\r\n      timePeriods.forEach((selectedTimePeriod) => {\r\n        let startDate = new Date();\r\n        let totalProfit = 0;\r\n\r\n        switch (selectedTimePeriod) {\r\n          case \"1D\":\r\n            startDate.setDate(startDate.getDate() - 1);\r\n            break;\r\n          case \"1W\":\r\n            startDate.setDate(startDate.getDate() - 7);\r\n            break;\r\n          case \"1M\":\r\n            startDate.setMonth(startDate.getMonth() - 1);\r\n            break;\r\n          case \"3M\":\r\n            startDate.setMonth(startDate.getMonth() - 3);\r\n            break;\r\n          case \"YTD\":\r\n            startDate = new Date(startDate.getFullYear(), 0, 1); // Year to Date\r\n            break;\r\n          case \"1Y\":\r\n            startDate.setFullYear(startDate.getFullYear() - 1);\r\n            break;\r\n          case \"Max\":\r\n            return trades.reduce((total, trade) => {\r\n              const entryPrice = parseFloat(trade.entry_price);\r\n              const exitPrice = parseFloat(trade.exit_price);\r\n              const contracts = trade.contracts;\r\n              if (!isNaN(exitPrice)) {\r\n                return total + (exitPrice - entryPrice) * contracts * 100;\r\n              }\r\n              return total;\r\n            }, 0);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n\r\n        if (selectedTimePeriod !== \"Max\") {\r\n          const filteredTrades = trades.filter(\r\n            (trade) => new Date(trade.close_date) >= startDate\r\n          );\r\n\r\n          totalProfit = filteredTrades.reduce((sum, trade) => {\r\n            const entryPrice = parseFloat(trade.entry_price);\r\n            const exitPrice = parseFloat(trade.exit_price);\r\n            const contracts = trade.contracts;\r\n            if (!isNaN(exitPrice)) {\r\n              return sum + (exitPrice - entryPrice) * contracts * 100;\r\n            }\r\n            return sum;\r\n          }, 0);\r\n        }\r\n\r\n        profitsData.push({\r\n          timePeriod: selectedTimePeriod,\r\n          profit: totalProfit,\r\n          backgroundColor:\r\n            totalProfit >= 0 ? \"lightgreen\" : \"rgb(255, 204, 204)\",\r\n        });\r\n      });\r\n\r\n      return profitsData;\r\n    };\r\n\r\n    const ctx = chartRef.current.getContext(\"2d\");\r\n    const profitsData = calculateProfitsForAllTimePeriods(trades);\r\n\r\n    const myChart = new window.Chart(ctx, {\r\n      type: \"bar\",\r\n      data: {\r\n        labels: profitsData.map((data) => data.timePeriod),\r\n        datasets: [\r\n          {\r\n            label: \"Profit/Loss\",\r\n            data: profitsData.map((data) => data.profit),\r\n            backgroundColor: profitsData.map((data) => data.backgroundColor),\r\n            barThickness: 50, // Adjust thickness as needed\r\n          },\r\n        ],\r\n      },\r\n      options: {\r\n        plugins: {\r\n          legend: {\r\n            display: false,\r\n          },\r\n        },\r\n        scales: {\r\n          x: {\r\n            grid: {\r\n              display: false,\r\n            },\r\n          },\r\n          y: {\r\n            display: true,\r\n            title: {\r\n              display: true,\r\n              text: \"Profit/Loss\",\r\n            },\r\n            grid: {\r\n              color: (context) =>\r\n                context.tick.value === 0\r\n                  ? \"rgba(0, 0, 0, 1)\"\r\n                  : \"rgba(0, 0, 0, 0)\", // Only show line at 0\r\n              lineWidth: 0.5, // Adjust line width as needed\r\n            },\r\n            ticks: {\r\n              callback: function (value, index, values) {\r\n                return value === 0 ? value : \"\";\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    return () => {\r\n      myChart.destroy();\r\n    };\r\n  }, [trades]);\r\n\r\n  return (\r\n    <div className=\"account-graph\">\r\n      <canvas ref={chartRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AccountGraph;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}