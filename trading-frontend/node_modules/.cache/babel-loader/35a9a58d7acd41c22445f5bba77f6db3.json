{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\casan\\\\trading-app\\\\trading-frontend\\\\src\\\\components\\\\pages\\\\Accounts.js\";\n// trading-frontend/src/components/Accounts.js\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nconst Accounts = () => {\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchUser = async () => {\n      const token = localStorage.getItem(\"access_token\");\n      if (!token) {\n        setLoading(false);\n        return navigate(\"/login\"); // Redirect to login if no token\n      }\n      try {\n        const response = await fetch(\"http://localhost:8000/users/me/\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!response.ok) throw new Error(\"Error fetching user data\");\n        const data = await response.json();\n        setUser(data);\n      } catch (err) {\n        setError(err.message);\n        // Optionally clear token if there's an error\n        localStorage.removeItem(\"access_token\");\n        navigate(\"/login\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUser();\n  }, [navigate]);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n  if (!user) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, \"Please Log In\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, \"You need to be logged in to view this page.\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => navigate(\"/login\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }\n    }, \"Go to Login\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => navigate(\"/register\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, \"Register\"));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"Account Details\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, error), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Username: \", user.username), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"Email: \", user.email), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"First Name: \", user.fname), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Last Name: \", user.lname), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Phone Number: \", user.phone_number), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Account Type: \", user.account_type)));\n};\nexport default Accounts;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Accounts","user","setUser","error","setError","loading","setLoading","navigate","fetchUser","token","localStorage","getItem","response","fetch","headers","Authorization","ok","Error","data","json","err","message","removeItem","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","color","username","email","fname","lname","phone_number","account_type"],"sources":["C:/Users/casan/trading-app/trading-frontend/src/components/pages/Accounts.js"],"sourcesContent":["// trading-frontend/src/components/Accounts.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Accounts = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const token = localStorage.getItem(\"access_token\");\r\n      if (!token) {\r\n        setLoading(false);\r\n        return navigate(\"/login\"); // Redirect to login if no token\r\n      }\r\n\r\n      try {\r\n        const response = await fetch(\"http://localhost:8000/users/me/\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        if (!response.ok) throw new Error(\"Error fetching user data\");\r\n        const data = await response.json();\r\n        setUser(data);\r\n      } catch (err) {\r\n        setError(err.message);\r\n        // Optionally clear token if there's an error\r\n        localStorage.removeItem(\"access_token\");\r\n        navigate(\"/login\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, [navigate]);\r\n\r\n  if (loading) {\r\n    return <p>Loading...</p>;\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div>\r\n        <h2>Please Log In</h2>\r\n        <p>You need to be logged in to view this page.</p>\r\n        <button onClick={() => navigate(\"/login\")}>Go to Login</button>\r\n        <button onClick={() => navigate(\"/register\")}>Register</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Account Details</h2>\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n      <div>\r\n        <p>Username: {user.username}</p>\r\n        <p>Email: {user.email}</p>\r\n        <p>First Name: {user.fname}</p>\r\n        <p>Last Name: {user.lname}</p>\r\n        <p>Phone Number: {user.phone_number}</p>\r\n        <p>Account Type: {user.account_type}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Accounts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}