{"ast":null,"code":"const API_BASE_URL = \"http://localhost:8000\";\n\n// Retrieve userId from localStorage\nconst getUserId = () => localStorage.getItem(\"sub\");\n// Retrieve and print all items from localStorage\nfor (let key of Object.keys(localStorage)) {\n  console.log(`${key}: ${localStorage.getItem(key)}`);\n}\n\n// Retrieve the user_data string from localStorage\nconst userDataString = localStorage.getItem(\"user_data\");\n\n// Parse the JSON string to an object\nconst userData = JSON.parse(userDataString);\n\n// Log the 'sub' value\nconsole.log(\"sub:\", userData.sub);\nconst userId = userData.sub;\nconsole.log(userId);\n\n// Create a new cash entry\nexport async function createCash(cashAmount) {\n  // Check if userId is available\n  if (!userId) {\n    throw new Error(\"User ID is not available. Please log in.\");\n  }\n  const response = await fetch(`${API_BASE_URL}/cash/${userId}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      initial_cash: cashAmount.initial_cash,\n      entry_date: cashAmount.entry_date\n    })\n  });\n  const data = await response.json();\n  if (response.ok) {\n    console.log(\"Cash added successfully:\", data);\n    return data; // Return the created cash entry\n  } else {\n    console.error(\"Error adding cash:\", data);\n    throw new Error(data);\n  }\n}\n\n// Fetch cash entries\nexport const getCash = async () => {\n  const userId = getUserId();\n\n  // Check if userId is available\n  if (!userId) {\n    throw new Error(\"User ID is not available. Please log in.\");\n  }\n  const response = await fetch(`${API_BASE_URL}/cash/${userId}`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (!response.ok) {\n    throw new Error(\"Error fetching cash data\");\n  }\n  return await response.json();\n};","map":{"version":3,"names":["API_BASE_URL","getUserId","localStorage","getItem","key","Object","keys","console","log","userDataString","userData","JSON","parse","sub","userId","createCash","cashAmount","Error","response","fetch","method","headers","body","stringify","initial_cash","entry_date","data","json","ok","error","getCash"],"sources":["C:/Users/casan/trading-app/trading-frontend/src/components/controllers/api/CashApi.js"],"sourcesContent":["const API_BASE_URL = \"http://localhost:8000\";\r\n\r\n// Retrieve userId from localStorage\r\nconst getUserId = () => localStorage.getItem(\"sub\");\r\n// Retrieve and print all items from localStorage\r\nfor (let key of Object.keys(localStorage)) {\r\n  console.log(`${key}: ${localStorage.getItem(key)}`);\r\n}\r\n\r\n// Retrieve the user_data string from localStorage\r\nconst userDataString = localStorage.getItem(\"user_data\");\r\n\r\n// Parse the JSON string to an object\r\nconst userData = JSON.parse(userDataString);\r\n\r\n// Log the 'sub' value\r\nconsole.log(\"sub:\", userData.sub);\r\n\r\nconst userId = userData.sub;\r\nconsole.log(userId);\r\n\r\n// Create a new cash entry\r\nexport async function createCash(cashAmount) {\r\n  // Check if userId is available\r\n  if (!userId) {\r\n    throw new Error(\"User ID is not available. Please log in.\");\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}/cash/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      initial_cash: cashAmount.initial_cash,\r\n      entry_date: cashAmount.entry_date,\r\n    }),\r\n  });\r\n\r\n  const data = await response.json();\r\n  if (response.ok) {\r\n    console.log(\"Cash added successfully:\", data);\r\n    return data; // Return the created cash entry\r\n  } else {\r\n    console.error(\"Error adding cash:\", data);\r\n    throw new Error(data);\r\n  }\r\n}\r\n\r\n// Fetch cash entries\r\nexport const getCash = async () => {\r\n  const userId = getUserId();\r\n\r\n  // Check if userId is available\r\n  if (!userId) {\r\n    throw new Error(\"User ID is not available. Please log in.\");\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}/cash/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(\"Error fetching cash data\");\r\n  }\r\n\r\n  return await response.json();\r\n};\r\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG,uBAAuB;;AAE5C;AACA,MAAMC,SAAS,GAAGA,CAAA,KAAMC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;AACnD;AACA,KAAK,IAAIC,GAAG,IAAIC,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC,EAAE;EACzCK,OAAO,CAACC,GAAG,CAAE,GAAEJ,GAAI,KAAIF,YAAY,CAACC,OAAO,CAACC,GAAG,CAAE,EAAC,CAAC;AACrD;;AAEA;AACA,MAAMK,cAAc,GAAGP,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;;AAExD;AACA,MAAMO,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACH,cAAc,CAAC;;AAE3C;AACAF,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEE,QAAQ,CAACG,GAAG,CAAC;AAEjC,MAAMC,MAAM,GAAGJ,QAAQ,CAACG,GAAG;AAC3BN,OAAO,CAACC,GAAG,CAACM,MAAM,CAAC;;AAEnB;AACA,OAAO,eAAeC,UAAUA,CAACC,UAAU,EAAE;EAC3C;EACA,IAAI,CAACF,MAAM,EAAE;IACX,MAAM,IAAIG,KAAK,CAAC,0CAA0C,CAAC;EAC7D;EAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEnB,YAAa,SAAQc,MAAO,EAAC,EAAE;IAC7DM,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEX,IAAI,CAACY,SAAS,CAAC;MACnBC,YAAY,EAAER,UAAU,CAACQ,YAAY;MACrCC,UAAU,EAAET,UAAU,CAACS;IACzB,CAAC;EACH,CAAC,CAAC;EAEF,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;EAClC,IAAIT,QAAQ,CAACU,EAAE,EAAE;IACfrB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEkB,IAAI,CAAC;IAC7C,OAAOA,IAAI,CAAC,CAAC;EACf,CAAC,MAAM;IACLnB,OAAO,CAACsB,KAAK,CAAC,oBAAoB,EAAEH,IAAI,CAAC;IACzC,MAAM,IAAIT,KAAK,CAACS,IAAI,CAAC;EACvB;AACF;;AAEA;AACA,OAAO,MAAMI,OAAO,GAAG,MAAAA,CAAA,KAAY;EACjC,MAAMhB,MAAM,GAAGb,SAAS,CAAC,CAAC;;EAE1B;EACA,IAAI,CAACa,MAAM,EAAE;IACX,MAAM,IAAIG,KAAK,CAAC,0CAA0C,CAAC;EAC7D;EAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEnB,YAAa,SAAQc,MAAO,EAAC,EAAE;IAC7DM,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB;EACF,CAAC,CAAC;EAEF,IAAI,CAACH,QAAQ,CAACU,EAAE,EAAE;IAChB,MAAM,IAAIX,KAAK,CAAC,0BAA0B,CAAC;EAC7C;EAEA,OAAO,MAAMC,QAAQ,CAACS,IAAI,CAAC,CAAC;AAC9B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}