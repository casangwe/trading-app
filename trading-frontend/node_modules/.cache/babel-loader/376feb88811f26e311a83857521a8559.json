{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\casan\\\\trading-app\\\\trading-frontend\\\\src\\\\components\\\\controllers\\\\financial\\\\IncomeExpensesComparisonChart.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { fetchFinancials } from \"../api/FinancialAPI\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer } from \"recharts\";\nimport { formatDate, formatCash } from \"../func/functions\";\nconst IncomeExpensesComparisonChart = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [chartData, setChartData] = useState([]);\n  const [summary, setSummary] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const financials = await fetchFinancials();\n        const sortedData = financials.sort((a, b) => new Date(a.entry_date) - new Date(b.entry_date));\n        setChartData(formatChartData(sortedData));\n        setSummary(calculateSummary(sortedData));\n      } catch (error) {\n        setError(\"Error fetching financial data\");\n        console.error(\"Error fetching financial data:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  const calculateSummary = data => {\n    const latestEntry = data[data.length - 1];\n    return {\n      date: formatDate(latestEntry === null || latestEntry === void 0 ? void 0 : latestEntry.entry_date),\n      income: (latestEntry === null || latestEntry === void 0 ? void 0 : latestEntry.income) || 0,\n      expenses: (latestEntry === null || latestEntry === void 0 ? void 0 : latestEntry.expenses) || 0\n    };\n  };\n  const formatChartData = data => {\n    return data.map(entry => ({\n      date: formatDate(entry.entry_date),\n      income: parseFloat(entry.income),\n      expenses: Math.abs(parseFloat(entry.expenses))\n    }));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"income-expenses-comparison-chart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"summary-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"income-summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"Income: \", formatCash((summary === null || summary === void 0 ? void 0 : summary.income) || 0)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"expenses-summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"Expenses: \", formatCash((summary === null || summary === void 0 ? void 0 : summary.expenses) || 0)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"date-summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, (summary === null || summary === void 0 ? void 0 : summary.date) || \"Loading...\")), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"Loading...\") : error ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, error) : /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LineChart, {\n    data: chartData,\n    style: {\n      background: \"transparent\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"date\",\n    tick: false,\n    axisLine: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    formatter: value => formatCash(value),\n    content: ({\n      payload\n    }) => {\n      if (payload && payload.length) {\n        const {\n          date,\n          income,\n          expenses\n        } = payload[0].payload;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"summary-section\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"income-summary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 23\n          }\n        }, formatCash((summary === null || summary === void 0 ? void 0 : summary.income) || 0)), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"expenses-summary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 23\n          }\n        }, formatCash((summary === null || summary === void 0 ? void 0 : summary.expenses) || 0)), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"date-summary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 23\n          }\n        }, (summary === null || summary === void 0 ? void 0 : summary.date) || \"Loading...\"));\n      }\n      return null;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Line, {\n    type: \"monotone\",\n    dataKey: \"income\",\n    stroke: \"#4a90e2\",\n    strokeWidth: 2,\n    dot: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Line, {\n    type: \"monotone\",\n    dataKey: \"expenses\",\n    stroke: \"#f44336\",\n    strokeWidth: 2,\n    dot: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }))));\n};\nexport default IncomeExpensesComparisonChart;","map":{"version":3,"names":["React","useState","useEffect","fetchFinancials","LineChart","Line","XAxis","YAxis","Tooltip","ResponsiveContainer","formatDate","formatCash","IncomeExpensesComparisonChart","loading","setLoading","error","setError","chartData","setChartData","summary","setSummary","fetchData","financials","sortedData","sort","a","b","Date","entry_date","formatChartData","calculateSummary","console","data","latestEntry","length","date","income","expenses","map","entry","parseFloat","Math","abs","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","width","height","style","background","dataKey","tick","axisLine","formatter","value","content","payload","type","stroke","strokeWidth","dot"],"sources":["C:/Users/casan/trading-app/trading-frontend/src/components/controllers/financial/IncomeExpensesComparisonChart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { fetchFinancials } from \"../api/FinancialAPI\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\nimport { formatDate, formatCash } from \"../func/functions\";\r\n\r\nconst IncomeExpensesComparisonChart = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [chartData, setChartData] = useState([]);\r\n  const [summary, setSummary] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const financials = await fetchFinancials();\r\n        const sortedData = financials.sort(\r\n          (a, b) => new Date(a.entry_date) - new Date(b.entry_date)\r\n        );\r\n\r\n        setChartData(formatChartData(sortedData));\r\n        setSummary(calculateSummary(sortedData));\r\n      } catch (error) {\r\n        setError(\"Error fetching financial data\");\r\n        console.error(\"Error fetching financial data:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const calculateSummary = (data) => {\r\n    const latestEntry = data[data.length - 1];\r\n    return {\r\n      date: formatDate(latestEntry?.entry_date),\r\n      income: latestEntry?.income || 0,\r\n      expenses: latestEntry?.expenses || 0,\r\n    };\r\n  };\r\n\r\n  const formatChartData = (data) => {\r\n    return data.map((entry) => ({\r\n      date: formatDate(entry.entry_date),\r\n      income: parseFloat(entry.income),\r\n      expenses: Math.abs(parseFloat(entry.expenses)),\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"income-expenses-comparison-chart-container\">\r\n      <div className=\"summary-section\">\r\n        <p className=\"income-summary\">\r\n          Income: {formatCash(summary?.income || 0)}\r\n        </p>\r\n        <p className=\"expenses-summary\">\r\n          Expenses: {formatCash(summary?.expenses || 0)}\r\n        </p>\r\n        <p className=\"date-summary\">{summary?.date || \"Loading...\"}</p>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div>Loading...</div>\r\n      ) : error ? (\r\n        <div>{error}</div>\r\n      ) : (\r\n        <ResponsiveContainer width=\"100%\" height={300}>\r\n          <LineChart data={chartData} style={{ background: \"transparent\" }}>\r\n            <XAxis dataKey=\"date\" tick={false} axisLine={false} />\r\n            <YAxis />\r\n            <Tooltip\r\n              formatter={(value) => formatCash(value)}\r\n              content={({ payload }) => {\r\n                if (payload && payload.length) {\r\n                  const { date, income, expenses } = payload[0].payload;\r\n                  return (\r\n                    <div className=\"summary-section\">\r\n                      <p className=\"income-summary\">\r\n                        {formatCash(summary?.income || 0)}\r\n                      </p>\r\n                      <p className=\"expenses-summary\">\r\n                        {formatCash(summary?.expenses || 0)}\r\n                      </p>\r\n                      <p className=\"date-summary\">\r\n                        {summary?.date || \"Loading...\"}\r\n                      </p>\r\n                    </div>\r\n                  );\r\n                }\r\n                return null;\r\n              }}\r\n            />\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"income\"\r\n              stroke=\"#4a90e2\"\r\n              strokeWidth={2}\r\n              dot={false}\r\n            />\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"expenses\"\r\n              stroke=\"#f44336\"\r\n              strokeWidth={2}\r\n              dot={false}\r\n            />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IncomeExpensesComparisonChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}